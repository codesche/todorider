# Day 3 — 네트워크: TCP/UDP, 3-way Handshake

## 1. 핵심 요약

- **TCP (Transmission Control Protocol)**
  - 연결 지향적 (3-way handshake 필요)
  - 신뢰성 보장 (패킷 손실 시 재전송)
  - 흐름 제어 (수신 윈도우 기반)
  - 혼잡 제어 (AIMD, Slow Start 등)
  - 예: 웹 브라우징, 이메일, 파일 전송

- **UDP (User Datagram Protocol)**
  - 비연결성, 신뢰성 보장 없음
  - 빠름 (오버헤드 적음)
  - 예: 스트리밍, 온라인 게임, VoIP

- **3-way Handshake (TCP 연결 설정)**
  1. **SYN**: 클라이언트 → 서버 (연결 요청, 초기 SEQ 전송)
  2. **SYN-ACK**: 서버 → 클라이언트 (요청 수락 + 서버 SEQ 전송)
  3. **ACK**: 클라이언트 → 서버 (수락 확인)
  - 이후 데이터 송수신 시작

- **4-way Handshake (TCP 연결 종료)**
  1. **FIN**: 클라이언트 → 서버 (연결 종료 요청)
  2. **ACK**: 서버 → 클라이언트 (요청 확인)
  3. **FIN**: 서버 → 클라이언트 (서버도 종료 요청)
  4. **ACK**: 클라이언트 → 서버 (종료 확인)

- **TIME_WAIT**
  - 연결 종료 후 클라이언트가 일정 시간(2MSL) 대기
  - 지연 패킷이 네트워크에 남아 있을 가능성 대비

---

## 2. 면접형 Q&A 예시

**Q1. TCP와 UDP의 차이를 설명해주세요.**  
👉 TCP는 연결 지향적이고 신뢰성을 보장하지만 느립니다. UDP는 비연결성이며 신뢰성 보장이 없지만 빠릅니다. 따라서 TCP는 웹/파일 전송에, UDP는 스트리밍/게임 등에 적합합니다.

**Q2. TCP의 3-way Handshake 과정은 무엇인가요?**  
👉 클라이언트가 SYN을 보내고, 서버가 SYN-ACK로 응답하며, 클라이언트가 ACK를 보내면 연결이 설정됩니다.

**Q3. TIME_WAIT 상태는 왜 필요한가요?**  
👉 이전 연결에서 지연된 패킷이 새 연결에 영향을 주지 않도록 하기 위함입니다. 또한 마지막 ACK가 제대로 도달하지 않은 경우 재전송을 보장합니다.

**Q4. SYN Flood 공격은 무엇이고, 어떻게 방어할 수 있나요?**  
👉 클라이언트가 SYN만 보내고 ACK를 보내지 않아 서버 리소스를 고갈시키는 공격입니다. 방어책은 SYN 쿠키 사용, backlog 큐 증가, 방화벽 차단 등이 있습니다.

---

## 3. 오늘의 미션
- [ ] 블로그에 `NW-01: TCP/UDP/3-way Handshake` 포스트 작성
- [ ] GitHub `cs-notes/nw/tcp-udp-handshake.md` 업로드
- [ ] 직접 답변: “TCP는 신뢰성을 어떻게 보장하나요?” (→ ACK, 재전송, 흐름/혼잡 제어)
