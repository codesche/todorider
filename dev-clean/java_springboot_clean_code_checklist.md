# 🧭 Java / Spring Boot Clean Code & OOP Checklist

## 핵심 20문항 (빌드 전 최종 점검)

- [ ] **가독성 우선**: 함수/클래스/패키지 이름이 역할을 정확히 설명한다(의미 없는 약어·축약 금지).
- [ ] **짧은 함수**: 하나의 함수는 하나의 일만 한다(로직 분기 2~3개 이내, 20~30줄 내외 권장).
- [ ] **명시적 의존성**: 숨은 전역/싱글톤 접근 대신 생성자 주입 사용(@Autowired 필드 주입 금지).
- [ ] **불변 데이터 선호**: DTO/값 객체는 가능한 불변으로(필드 `final`, 방어적 복사).
- [ ] **컬렉션 제네릭/PECS**: 로(raw) 타입 금지, 입력은 `? super T`, 출력은 `? extends T`.
- [ ] **Optional 사용 절제**: 반환 전용, 필드/파라미터로 사용 금지. `null`과 혼용 금지.
- [ ] **예외는 흐름 제어가 아님**: 검증 실패는 예외로, 정상 흐름 제어에는 조건문 사용.
- [ ] **자원 관리**: `try-with-resources`로 I/O/커넥션/스트림 확실히 닫기.
- [ ] **equals/hashCode**: 값 객체만 구현, 엔티티는 식별자 확정 전까지 지양(영속화 이후 기준).
- [ ] **상속보다 합성**: 상속은 진짜 IS-A('A는 B이다'일 때의 '~이다')일 때만. 확장 포인트는 인터페이스/전략 패턴 우선.
- [ ] **Enum 선호**: 상수 집합·플래그 값은 enum으로. 매직넘버/문자열 금지.
- [ ] **빌더/정적 팩터리**: 파라미터 많은 생성자는 빌더, `of`/`from` 등 정적 팩터리 활용.
- [ ] **로깅 규정**: `log.debug/info/warn/error` 목적 구분, PII/비밀정보 로깅 금지, 예외는 `log.error("...", e)`.
- [ ] **검증 일관화**: Controller 진입에서 `@Validated/@Valid` + Bean Validation(예: `@NotBlank`).
- [ ] **API 규약**: 상태코드/메서드 의미 지키기(POST-생성, PUT-전체갱신, PATCH-부분갱신), 에러 응답 포맷 통일.
- [ ] **트랜잭션 경계**: Service 계층 @Transactional, 읽기 전용은 `readOnly=true`, 외부 호출 포함 금지.
- [ ] **JPA 성능**: 페치 전략 점검(LAZY 기본), N+1 방지(페치 조인/배치 사이즈/DTO 프로젝션).
- [ ] **동시성 전략**: 변경 엔티티에 낙관적 락(@Version) 고려, 멀티스레드 공유 가변 상태 제거.
- [ ] **보안 기본값**: 입력값 검증, 출력 인코딩, CORS/CSRF/헤더 보안, 비밀번호 단방향 해시(BCrypt).
- [ ] **테스트 신뢰도**: 단위테스트 빠르고 독립적, 통합/슬라이스 테스트 분리, Given-When-Then 서술.

---

## 💡 주제별 세부 체크리스트

### 1️⃣ 코드 스타일 & 클린 코드
- [ ] 의미 있는 이름(도메인 용어 사용), `Utils`, `Manager` 같은 모호한 명칭 지양  
- [ ] 매개변수 3개 이하 권장(초과 시 파라미터 객체/빌더)  
- [ ] 조기 반환(guard clause)로 중첩 최소화  
- [ ] 주석은 “왜”만, “무엇/어떻게”는 코드가 말하게  
- [ ] 매직 넘버 → 상수/enum 추출

### 2️⃣ 객체지향 설계 원칙 (SOLID)
- [ ] SRP: 클래스 변경 이유는 하나  
- [ ] OCP: 확장에 열려 있고 수정엔 닫혀 있게(전략/템플릿/정책 주입)  
- [ ] LSP: 하위 타입이 상위 타입 계약을 깨지 않음  
- [ ] ISP: 클라이언트 별 작은 인터페이스  
- [ ] DIP: 구체가 아닌 추상에 의존

### 3️⃣ Effective Java 핵심
- [ ] 불필요한 객체 생성 회피(캐싱/재사용) vs 과한 미세최적화 금지  
- [ ] `Cloneable` 지양, 복사 생성자/팩터리 사용  
- [ ] 가변 노출 금지(방어적 복사)  
- [ ] `Comparable` 구현 시 정렬 일관성 유지  
- [ ] 직렬화 필요 시 명시적 `serialVersionUID`, 역직렬화 가드

### 4️⃣ 예외 처리
- [ ] 예외는 복구 가능성 기준으로 구분(비즈니스/시스템)  
- [ ] 예외 메시지는 문제 + 맥락(키 값, 상태) 포함  
- [ ] `throws Exception` 금지, 의미 있는 예외 타입 사용  
- [ ] ControllerAdvice로 에러 응답 일원화

### 5️⃣ 컬렉션 / 스트림
- [ ] Raw 타입 금지, 제네릭 명확화  
- [ ] 변경 가능한 컬렉션 외부 노출 시 `Collections.unmodifiableList` 등 반환  
- [ ] Stream은 과용 금지(가독성 우선), 병렬 스트림 신중

### 6️⃣ 동시성
- [ ] 공유 가변 상태 최소화, 불변/스레드-세이프 컬렉션 고려  
- [ ] Executor 관리(스레드풀 크기, graceful shutdown)  
- [ ] 시간/시간대/Locale는 명시적(`ZoneId` 등)

### 7️⃣ Spring Boot 아키텍처
- [ ] 계층 분리(Controller-Service-Repository), Controller에 비즈니스 로직 금지  
- [ ] 구성/환경 분리(`application-{profile}.yml`), 시크릿은 환경변수/비밀관리  
- [ ] `@ConfigurationProperties`로 설정 바인딩  
- [ ] 순환 의존성 금지(도메인 분리/포트-어댑터 고려)

### 8️⃣ 트랜잭션 & 데이터
- [ ] 트랜잭션 경계: Service 진입/종료 기준, 내부 메서드 self-invocation 주의  
- [ ] 읽기 전용 트랜잭션으로 더티체크/플러시 최적화  
- [ ] 외부 시스템 호출은 트랜잭션 밖에서  
- [ ] idempotency 고려(특히 결제/재시도 처리)

### 9️⃣ JPA/쿼리
- [ ] 연관관계 지연 로딩(LAZY) 기본, 컬렉션 즉시로딩 금지  
- [ ] N+1 감지(테스트/로그) 및 해결(fetch join, EntityGraph, 배치 사이즈)  
- [ ] 엔티티 equals/hashCode: 식별자 확정 전 비교 주의  
- [ ] 벌크 연산 후 영속성 컨텍스트 정리(clear)  
- [ ] DTO 프로젝션으로 읽기 전용 조회 최적화

### 🔟 API 설계
- [ ] REST 리소스 중심 URI, 복수형 사용  
- [ ] 표준 상태코드, 에러 코드/메시지 규격화  
- [ ] 페이지네이션/정렬/필터 쿼리 파라미터 규약  
- [ ] 응답 스키마 안정성(필드 제거 대신 비활성/Deprecated 정책)  
- [ ] 버전닝 전략 명확화(`/v1`, 헤더, 혹은 별도 게이트웨이)

### 🔐 보안
- [ ] 입력 검증(서버측), 출력 인코딩(XSS)  
- [ ] 인증/인가 분리, 최소권한 원칙  
- [ ] 비밀번호 해시(BCrypt/Argon2), 토큰 저장/회수 정책  
- [ ] HTTPS만, 보안 헤더(HSTS, CSP, X-Frame-Options 등)  
- [ ] 비밀값/키 로깅/노출 금지

### 🧩 로깅 / 모니터링
- [ ] 상관ID/트레이스ID 로깅, 요청-응답 핵심 메타만  
- [ ] PII 마스킹, 샘플링/레벨 정책  
- [ ] 헬스체크/프로브/메트릭 노출(Actuator)

### 🧪 테스트 전략
- [ ] 단위/슬라이스/통합/계약 테스트 구분  
- [ ] DB 테스트는 Testcontainers/H2 대체 기준 명확화  
- [ ] 픽스처는 빌더/테스트 데이터 팩토리  
- [ ] Given-When-Then + @DisplayName으로 의도 명확화  
- [ ] 느린 테스트 격리, 병렬 실행 안전성

### ⚙️ DevOps 품질
- [ ] CI에서 정적 분석(SpotBugs, Checkstyle), 테스트 커버리지 기준 합의  
- [ ] 빌드 산출물 불변, 환경별 설정만 차등  
- [ ] 무중단 배포/롤백 시나리오, 마이그레이션 롤백 계획

---

## 🧾 PR용 미니 체크리스트 (요약 10개)
- [ ] 함수/클래스 이름이 의도를 드러낸다  
- [ ] 메서드 길이/책임 적절, 중복 제거  
- [ ] 불변/방어적 복사 적용  
- [ ] 예외 타입/메시지 명확, 흐름 제어로 사용 안 함  
- [ ] 트랜잭션 경계 적절, 외부 I/O 분리  
- [ ] N+1 없음, 쿼리 수/시간 수용 범위  
- [ ] 로깅 수준/민감정보 점검  
- [ ] Bean Validation + 에러 응답 일관  
- [ ] 보안 기본 설정/헤더/토큰 처리  
- [ ] 테스트 신뢰 가능(실행 빠르고 재현성 있음)
